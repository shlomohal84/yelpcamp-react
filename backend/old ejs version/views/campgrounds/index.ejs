<% layout('/layouts/boilerplate') %>
	<div id="map"></div>

	<h1>All Campgrounds</h1>
	<div>
		<a href="/campgrounds/new">Add Campground</a>
	</div>
	<ul>
		<% for(let elm of campgrounds){ %>
			<div class="card mb-3">
				<div class="row">
					<div class="col-md-4">
						<%if (elm.images.length){ %>
							<img class="img-fluid" src="<%=elm.images[0].url %>" alt="<%= elm.title%>">
							<% } else{%>
								<img class="img-fluid" src="" alt="<%= elm.title%>">
								<%} %>
					</div>
					<div class="col-md-8">
						<div class="card-body">
							<h5 class="card-title"> <%=elm.title %> </h5>
							<!-- <h5><%=elm.properties.popUpMarkup %></h5> -->
							<p class="card-text">
								<%=elm.description %>
							</p>
							<p class="card-text"><small class="text-muted">
									<%=elm.location %>
								</small></p>
							<a href="/campgrounds/<%=elm._id %>" class="btn btn-primary">View <%=elm.title %></a>
						</div>
					</div>
				</div>
			</div>
			<% } %>
	</ul>

	<script>
		const mapToken = '<%-process.env.MAPBOX_TOKEN%>'
		const campgrounds = { features:<%- JSON.stringify(campgrounds) %>}
	</script>
	<script src="/js/clusterMap.js"></script>